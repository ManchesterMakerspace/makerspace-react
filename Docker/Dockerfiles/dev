FROM node:10.15.3

# Fetch yarn and install
RUN npm install -g yarn

# Create application directories
# tmp may not exist in local and must be created explicitly
ENV app /usr/src/app

# Install packages using Yarn
ADD package.json yarn.lock /tmp/
RUN cd /tmp && yarn
RUN mkdir -p $app && cd $app && ln -s /tmp/node_modules

EXPOSE 3035

WORKDIR $app

CMD ["yarn", "start"]
