FROM node:10.15.3

# Fetch yarn and install
RUN npm install -g yarn

# Create application directories
# tmp may not exist in local and must be created explicitly
ENV app /usr/src/app

# Install packages using Yarn
ADD package.json yarn.lock /tmp/
RUN cd /tmp && yarn
RUN mkdir -p $app && cd $app && ln -s /tmp/node_modules

COPY Docker/scripts/wait_to_test.sh /bin/wait_to_test.sh
RUN chmod +x /bin/wait_to_test.sh

CMD ["/bin/wait_to_test.sh"]